<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ê²Œì‹œê¸€ ìƒì„¸</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        body { margin-bottom: 70px; padding: 20px; }
        .comment-box { margin-top: 30px; }
        .comment { padding: 10px; border-bottom: 1px solid #ddd; }
        .comment strong { display: block; color: #333; }
        .comment-form input { width: 100%; padding: 8px; margin-bottom: 10px; }
    </style>
</head>
<body>
<a href="/board" class="btn btn-link mb-3">â† ëª©ë¡</a>

<h3 th:text="${post.user.nickname != null ? post.user.nickname : post.user.email} + 'ì˜ ê²Œì‹œë¬¼'">ì‘ì„±ì</h3>

<img th:if="${post.imageUrl != null}" th:src="${post.imageUrl}" class="img-fluid mb-3" style="max-width: 100%; height: auto;">

<p th:text="${post.content}">ê²Œì‹œê¸€ ë‚´ìš©</p>

<p class="text-muted" th:text="'ìœ„ì¹˜: ' + ${post.location}"></p>
<p class="text-muted" th:text="'í•´ì‹œíƒœê·¸: ' + ${post.hashtags}"></p>
<p class="text-muted" th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd HH:mm')}"></p>

<hr>

<!-- ëŒ“ê¸€ ëª©ë¡ -->
<div class="comment-box">
    <h5>ğŸ’¬ ëŒ“ê¸€</h5>
    <div th:if="${#lists.isEmpty(comments)}">
        <p class="text-muted">ì•„ì§ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤. ì²« ëŒ“ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”!</p>
    </div>
    <div th:each="comment : ${comments}" class="comment">
        <strong th:text="${comment.user.nickname != null ? comment.user.nickname : comment.user.email}">ì‘ì„±ì</strong>
        <p th:text="${comment.content}">ëŒ“ê¸€ ë‚´ìš©</p>
        <p class="text-muted" style="font-size: 0.8rem;" th:text="${#temporals.format(comment.createdAt, 'yyyy-MM-dd HH:mm')}"></p>
    </div>
</div>

<!-- ëŒ“ê¸€ ì‘ì„± í¼ -->
<form th:action="@{/board/{postId}/comment(postId=${post.id})}" method="post" class="comment-form mt-4">
    <div class="form-group">
        <input type="text" name="content" class="form-control" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”..." required>
    </div>
    <button type="submit" class="btn btn-sm btn-primary">ëŒ“ê¸€ ë“±ë¡</button>
</form>

<!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
<div th:replace="~{fragments/nav :: bottom('board')}"></div>
</body>
</html>
